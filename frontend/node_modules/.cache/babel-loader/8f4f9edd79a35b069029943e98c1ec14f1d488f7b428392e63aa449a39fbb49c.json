{"ast":null,"code":"var _jsxFileName = \"C:\\\\470 Project\\\\frontend\\\\src\\\\components\\\\Cars\\\\CarList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport API from \"../../utils/api\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CarList = () => {\n  _s();\n  const [cars, setCars] = useState([]);\n  const {\n    user\n  } = useContext(AuthContext);\n  const fetchCars = async () => {\n    try {\n      const res = await API.get(\"/cars\");\n      setCars(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch cars:\", err);\n      alert(\"Failed to load cars. Please try again later.\");\n    }\n  };\n  const handleDelete = async carId => {\n    if (!window.confirm(\"Are you sure you want to delete this car?\")) return;\n    try {\n      await API.delete(`/cars/${carId}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      alert(\"Car deleted successfully!\");\n      fetchCars(); // Refresh the list\n    } catch (err) {\n      console.error(\"Failed to delete car:\", err);\n      alert(\"Error deleting car or unauthorized.\");\n    }\n  };\n  useEffect(() => {\n    fetchCars();\n  }, []);\n\n  // Debug output\n  console.log(\"USER:\", user);\n  console.log(\"CARS:\", cars);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shop Cars\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\n        gap: \"20px\"\n      },\n      children: cars.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No cars found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this) : cars.map(car => {\n        var _car$seller;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ccc\",\n            padding: \"10px\",\n            borderRadius: \"5px\",\n            position: \"relative\",\n            background: \"#fff\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"absolute\",\n              top: 0,\n              right: 0,\n              background: \"red\",\n              color: \"white\",\n              padding: \"2px 6px\",\n              fontSize: \"12px\"\n            },\n            children: \"Sale!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), car.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: car.image,\n            alt: car.title,\n            style: {\n              width: \"100%\",\n              height: \"180px\",\n              objectFit: \"cover\",\n              borderRadius: \"4px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: \"10px 0 5px\"\n            },\n            children: car.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Brand:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this), \" \", car.brand]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Model:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this), \" \", car.model]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                textDecoration: \"line-through\",\n                color: \"#888\"\n              },\n              children: [\"$\", car.price + 500]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: {\n                color: \"#e60000\"\n              },\n              children: [\"$\", car.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Payment:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), \" \", car.paymentType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), ((user === null || user === void 0 ? void 0 : user.id) === (car === null || car === void 0 ? void 0 : (_car$seller = car.seller) === null || _car$seller === void 0 ? void 0 : _car$seller._id) || (user === null || user === void 0 ? void 0 : user.isAdmin)) && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(car._id),\n            style: {\n              position: \"absolute\",\n              top: \"10px\",\n              left: \"10px\",\n              background: \"red\",\n              color: \"white\",\n              border: \"none\",\n              padding: \"5px 10px\",\n              borderRadius: \"4px\",\n              cursor: \"pointer\"\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this)]\n        }, car._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(CarList, \"HUHnRt4uqT+idITAVYbdhFAaltw=\");\n_c = CarList;\nexport default CarList;\nvar _c;\n$RefreshReg$(_c, \"CarList\");","map":{"version":3,"names":["React","useEffect","useState","useContext","API","AuthContext","jsxDEV","_jsxDEV","CarList","_s","cars","setCars","user","fetchCars","res","get","data","err","console","error","alert","handleDelete","carId","window","confirm","delete","headers","Authorization","localStorage","getItem","log","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","display","gridTemplateColumns","gap","length","map","car","_car$seller","border","borderRadius","position","background","top","right","color","fontSize","image","src","alt","title","width","height","objectFit","margin","brand","model","textDecoration","price","paymentType","id","seller","_id","isAdmin","onClick","left","cursor","_c","$RefreshReg$"],"sources":["C:/470 Project/frontend/src/components/Cars/CarList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport API from \"../../utils/api\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nconst CarList = () => {\r\n  const [cars, setCars] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const fetchCars = async () => {\r\n    try {\r\n      const res = await API.get(\"/cars\");\r\n      setCars(res.data);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch cars:\", err);\r\n      alert(\"Failed to load cars. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (carId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this car?\")) return;\r\n\r\n    try {\r\n      await API.delete(`/cars/${carId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      });\r\n      alert(\"Car deleted successfully!\");\r\n      fetchCars(); // Refresh the list\r\n    } catch (err) {\r\n      console.error(\"Failed to delete car:\", err);\r\n      alert(\"Error deleting car or unauthorized.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCars();\r\n  }, []);\r\n\r\n  // Debug output\r\n  console.log(\"USER:\", user);\r\n  console.log(\"CARS:\", cars);\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Shop Cars</h2>\r\n      <div\r\n        style={{\r\n          display: \"grid\",\r\n          gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\r\n          gap: \"20px\",\r\n        }}\r\n      >\r\n        {cars.length === 0 ? (\r\n          <p>No cars found</p>\r\n        ) : (\r\n          cars.map((car) => (\r\n            <div\r\n              key={car._id}\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                padding: \"10px\",\r\n                borderRadius: \"5px\",\r\n                position: \"relative\",\r\n                background: \"#fff\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: 0,\r\n                  right: 0,\r\n                  background: \"red\",\r\n                  color: \"white\",\r\n                  padding: \"2px 6px\",\r\n                  fontSize: \"12px\",\r\n                }}\r\n              >\r\n                Sale!\r\n              </div>\r\n              {car.image && (\r\n                <img\r\n                  src={car.image}\r\n                  alt={car.title}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"180px\",\r\n                    objectFit: \"cover\",\r\n                    borderRadius: \"4px\",\r\n                  }}\r\n                />\r\n              )}\r\n              <h3 style={{ margin: \"10px 0 5px\" }}>{car.title}</h3>\r\n              <p>\r\n                <strong>Brand:</strong> {car.brand}\r\n              </p>\r\n              <p>\r\n                <strong>Model:</strong> {car.model}\r\n              </p>\r\n              <p>\r\n                <span\r\n                  style={{\r\n                    textDecoration: \"line-through\",\r\n                    color: \"#888\",\r\n                  }}\r\n                >\r\n                  ${car.price + 500}\r\n                </span>{\" \"}\r\n                <strong style={{ color: \"#e60000\" }}>${car.price}</strong>\r\n              </p>\r\n              <p>\r\n                <strong>Payment:</strong> {car.paymentType}\r\n              </p>\r\n\r\n              {/* Show Delete if user is admin or owns this car */}\r\n              {(user?.id === car?.seller?._id || user?.isAdmin) && (\r\n                <button\r\n                  onClick={() => handleDelete(car._id)}\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    top: \"10px\",\r\n                    left: \"10px\",\r\n                    background: \"red\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    padding: \"5px 10px\",\r\n                    borderRadius: \"4px\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                >\r\n                  Delete\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}